(this["webpackJsonpreddit-imgs"]=this["webpackJsonpreddit-imgs"]||[]).push([[0],{123:function(e,t,n){"use strict";n.r(t);var i=n(5),a=n(1),c=n.n(a),o=n(11),s=n.n(o),r=(n(98),n(73)),l=n.n(r),d=n(57),h=n(43),j=n(36),u=n(18),b=n(165),g=n(180),p=n(173),O=n(174),f=n(170),m=n(175),x=n(172),w=n(181),v=n(85),y=n(81),k=n.n(y),N=n(80),C=n.n(N),L=n(78),T=n.n(L),I=n(79),z=n.n(I),A=n(42),F=n(56),S=n.n(F),P=n(74),R=n(178),B=n(179),U=n(171),M=n(47),_=n.n(M),E=n(12),J=n(75),q=n.n(J),G={kind:"string",data:{modhash:"",dist:0,children:[],after:null,before:null}},V=Object(b.a)((function(e){var t,n;return Object(g.a)({search:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(E.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(E.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},Object(u.a)(t,e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),Object(u.a)(t,"flexGrow",1),Object(u.a)(t,"maxWidth",400),t),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:(n={padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},Object(u.a)(n,e.breakpoints.up("md"),{width:"20ch"}),Object(u.a)(n,"color","#fff"),n),textField:{width:"100%"}})})),D=function(){var e=Object(P.a)(S.a.mark((function e(t){var n,i,a,c=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"sr",i=c.length>2&&void 0!==c[2]?c[2]:"top",a=!(c.length>3&&void 0!==c[3])||c[3],e.abrupt("return",new Promise((function(e){var c="https://www.reddit.com/search.json"+"?q=".concat(encodeURIComponent(t))+"&type=".concat(n)+"&show=all"+"&sort=".concat(i)+"&include_over_18=".concat(a?"on":"off");console.log(c),_.a.get(c).then((function(t){console.log(t.data),e(t.data)})).catch((function(t){console.log(t),e(G)}))})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(e){var t=V(),n=Object(a.useState)(G),o=Object(j.a)(n,2),s=o[0],r=o[1],l=s&&s.data&&s.data.children?s.data.children:[],d=c.a.useState(!1),h=Object(j.a)(d,2),u=h[0],b=h[1],g=u&&0===l.length;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:t.search,children:[Object(i.jsx)("div",{className:t.searchIcon,children:Object(i.jsx)(q.a,{})}),Object(i.jsx)(B.a,{id:"search-bar",freeSolo:!0,open:u,onChange:function(t,n){console.log("search change",n),n&&e.store.navigateTo(n)},classes:{root:t.inputRoot},onOpen:function(){b(!0)},onClose:function(){b(!1)},options:l.map((function(e){return e.data.url})),style:{width:"100%"},renderInput:function(e){return Object(i.jsx)(R.a,Object(A.a)(Object(A.a)({},e),{},{InputProps:Object(A.a)(Object(A.a)({},e.InputProps),{},{endAdornment:Object(i.jsxs)(c.a.Fragment,{children:[g?Object(i.jsx)(U.a,{color:"inherit",size:20}):null,e.InputProps.endAdornment]}),classes:{root:t.inputInput}}),classes:{root:t.textField},onChange:function(e){D(e.target.value).then((function(e){r(e)})),console.log(e.target.value)}}))}})]})})},H=Object(b.a)((function(e){return Object(g.a)({grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(u.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),sectionDesktop:Object(u.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(u.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})})})),K=function(e){var t=H(),n=c.a.useState(null),a=Object(j.a)(n,2),o=a[0],s=a[1],r=c.a.useState(null),l=Object(j.a)(r,2),d=l[0],h=l[1],u=Boolean(o),b=Boolean(d),g=function(){h(null)},y=function(){s(null),g()},N=Object(i.jsxs)(v.a,{anchorEl:o,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:y,children:[Object(i.jsx)(w.a,{onClick:y,children:"Profile"}),Object(i.jsx)(w.a,{onClick:y,children:"My account"})]}),L=Object(i.jsxs)(v.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:g,children:[Object(i.jsxs)(w.a,{children:[Object(i.jsx)(f.a,{"aria-label":"show 4 new mails",color:"inherit",children:Object(i.jsx)(x.a,{badgeContent:4,color:"secondary",children:Object(i.jsx)(T.a,{})})}),Object(i.jsx)("p",{children:"Messages"})]}),Object(i.jsxs)(w.a,{children:[Object(i.jsx)(f.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(i.jsx)(x.a,{badgeContent:11,color:"secondary",children:Object(i.jsx)(z.a,{})})}),Object(i.jsx)("p",{children:"Notifications"})]}),Object(i.jsxs)(w.a,{onClick:function(e){s(e.currentTarget)},children:[Object(i.jsx)(f.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(i.jsx)(C.a,{})}),Object(i.jsx)("p",{children:"Profile"})]})]});return Object(i.jsxs)("div",{className:t.grow,children:[Object(i.jsx)(p.a,{position:"fixed",children:Object(i.jsxs)(O.a,{children:[Object(i.jsx)(f.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"open drawer",children:Object(i.jsx)(k.a,{})}),Object(i.jsx)(m.a,{className:t.title,variant:"h6",noWrap:!0,children:"React Gallery"}),Object(i.jsx)("div",{className:t.grow}),Object(i.jsx)(W,{store:e.store})]})}),L,N]})},Q=n(82),X=n(83),Y=n(21),Z=function(e){return e.replace(/&amp;/g,"&")},$=new function e(){var t=this;Object(Q.a)(this,e),this.history=Object(X.a)(),this.isLoading=Object(Y.a)(!1),this.size=Object(Y.a)(400),this.loaderVisible=!1,this.redditSorting=Object(Y.a)("new"),this.redditType=Object(Y.a)(null),this.redditAsset=Object(Y.a)(null),this.last=null,this.imageObj=Object(Y.a)([]),this.shownImgUrls=[],this.navigateTo=function(e){t.history.push(e,{})},this.fetchNext=function(){if(!t.isLoading.get()&&t.redditType.get()&&t.redditAsset.get()){var e;t.isLoading.set(!0),e="r"===t.redditType.get()?"https://www.reddit.com/".concat(t.redditType.get(),"/").concat(t.redditAsset.get(),"/").concat(t.redditSorting.get(),".json?limit=50").concat(t.last?"&after=".concat(t.last):""):"https://www.reddit.com/".concat(t.redditType.get(),"/").concat(t.redditAsset.get(),"/.json?limit=50").concat(t.last?"&after=".concat(t.last):""),console.log(e);var n=(c=t.imageObj.get(),JSON.parse(JSON.stringify(c))),i=0;_.a.get(e).then((function(e){if(console.log(e.data),e.data){t.last=e.data.data.after;for(var a=e.data.data.children,c=0;c<a.length;c++){var o=a[c].data;if(o.preview&&o.preview.images&&o.preview.images.length>0)for(var s=o.author,r=o.preview.images,l=o.title,d=0;d<r.length;d++){var h=Z(r[d].source.url);if(!t.shownImgUrls.includes(h)){var j={author:s,image:h,title:l,post:"https://www.reddit.com".concat(o.permalink)};n.push(j),t.shownImgUrls.push(h)}}i++}}t.imageObj.set(n),t.isLoading.set(!1),window.requestAnimationFrame((function(){t.loaderVisible&&i>0&&t.fetchNext()}))})).catch((function(e){t.isLoading.set(!1),console.log(e)}))}else console.log("Fetch doesnt have everything",{isLoading:t.isLoading.get(),redditType:t.redditType.get(),redditAsset:t.redditAsset.get()}),(a=500,new Promise((function(e){window.setTimeout((function(){e()}),a)}))).then((function(){t.fetchNext()}));var a,c},this.updateLocation=function(e){console.log("location updated",e);var n=e.split("/").filter((function(e){return""!==e}));2===n.length?(t.redditType.set(n[0]),t.redditAsset.set(n[1])):(t.redditType.set(null),t.redditAsset.set(null)),t.imageObj.set([]),new Promise((function(e){window.requestAnimationFrame((function(){e()}))})).then((function(){t.fetchNext()}))},this.updateLocation(window.location.pathname),this.history.listen((function(e){t.updateLocation(e.location.pathname)}))};window.store=$;var ee=$;console.log("publicUrl","/reddit-gallery");var te=function(){var e=Object(Y.b)(ee.imageObj),t=Object(Y.b)(ee.size),n=e.get().map((function(e,n){return Object(i.jsxs)("div",{className:"img-cont",style:{height:t.get(),width:t.get()},children:[Object(i.jsx)("img",{src:e.image}),Object(i.jsxs)("div",{className:"info-bar",children:[Object(i.jsx)("a",{href:"https://www.reddit.com/user/".concat(e.author,"/"),target:"_blank",title:e.author,children:Object(i.jsx)(d.b,{})}),Object(i.jsx)("a",{href:e.post,target:"_blank",title:e.title,children:Object(i.jsx)(d.a,{})}),Object(i.jsx)("a",{href:"".concat(window.location.origin,"/user/").concat(e.author),target:"_blank",title:"User images",children:Object(i.jsx)(h.a,{})})]})]},n)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(K,{store:ee}),Object(i.jsxs)("div",{className:"imgs",style:{marginTop:64},children:[n,Object(i.jsx)(l.a,{onChange:function(e){ee.loaderVisible=e,e&&(console.log("fetching next"),ee.fetchNext())},children:Object(i.jsx)("div",{style:{height:200,fontSize:40,color:"#fff"},children:ee.isLoading?Object(i.jsx)(h.b,{className:"icon-spin"}):null})})]}),Object(i.jsxs)("div",{className:"zoom-box",children:[Object(i.jsx)("div",{className:"zoom-btn",onClick:function(){var e=1.1*t.get();e>1e3&&(e=1e3),ee.size.set(e)},children:Object(i.jsx)(h.c,{})}),Object(i.jsx)("div",{className:"zoom-btn",onClick:function(){var e=.9*ee.size.get();e<200&&(e=200),ee.size.set(e)},children:Object(i.jsx)(h.d,{})})]})]})},ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,182)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),i(e),a(e),c(e),o(e)}))},ie=n(84),ae=n(176),ce=n(177),oe=Object(ie.a)({palette:{primary:{main:"#bf360c"},secondary:{main:"#d84315"}}});s.a.render(Object(i.jsxs)(ae.a,{theme:oe,children:[Object(i.jsx)(ce.a,{}),Object(i.jsx)(te,{})]}),document.getElementById("root")),ne()},98:function(e,t,n){}},[[123,1,2]]]);
//# sourceMappingURL=main.62e32eec.chunk.js.map